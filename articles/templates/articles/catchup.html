{% extends "articles/base.html" %}
{% load static %}
{% load i18n %}

{#Catchup is a varaiation of the new page, but for days in the past and has set pagination#}

{% block head %}
  {{ block.super }}
  <script src="{% static 'js/mathjaxToggle.min.js' %}" type="text/javascript"></script>
  <script type="text/javascript">mathjaxToggle();</script>
{% endblock head %}

{% block header_h1 %}
<div class="header-breadcrumbs">
  <a href="{% url 'articles:home' %}"><img src="{% static 'images/arxiv-logo-one-color-white.svg' %}" alt="arxiv logo" style="height:40px;"/></a> <span>&gt;</span>
  <a href="{% url 'articles:catchup_form' %}">{% trans "Catchup" %}</a>
</div>
{% endblock %}

{% block content %}
<div id='content-inner'>
<div id='dlpage'>
  <h1>{% trans "Catchup results for" %} {{ subject.full_name }} {% trans "on" %} {{ date_adbY }}</h1>

  {% block list_index %}
    <ul>
      {% for ityp in index_for_types %}
      <li><a href="{{ityp.1}}#item{{ityp.2}}">{{ityp.0}}</a></li>
      {% endfor %}
    </ul>

  {% endblock %}

  {% block pre_items %}
    <div>
      {% if next_day %}
        {% url 'articles:catchup' subject=subject.id date=next_day as base_url %}
        <a href="{{ base_url }}?abs={{ include_abs }}&page=1">{% trans "Continue to the next day" %}</a>
        <br><br>
      {% endif %}

      {% trans "Total of" %} {{ count }} {% trans "entries for" %} {{ date_adbY }}
      {% if paging|length > 0 %}
      {% trans "View page:" %}
        {% for number, link in paging %}

          {% if link == 'no-link' %}
            <span>{{ number }}</span>
          {% else %}
            <a href={{ link }}>{{ number }}</a>
          {% endif %}

        {% endfor %}
      {% endif %}

    </div>
  {% endblock %}

  {% block items %}

    {% for sec in sub_sections_for_types %}
      {%if sec.visible%}
        <dl id='articles'>
        {% if sec.heading %}
            <h3>{{ sec.heading }}</h3>
        {% endif %}

        {% if sec.items|length == 0 %}
            <p>{% trans "No updates for this time period." %}</p>
        {% endif %}

        {% for item, dt, dd in sec.items %}
            {{ dt|safe }}
            {{ dd|safe }}
        {% endfor %}
        </dl>
      {% endif %}
    {% endfor %}

    {% if count == 0 %}
      <br>
      {% if page > 1 %}
        <div>
          {% trans "No further updates for" %} {{ date_adbY }}
          <br>
            {% url 'articles:catchup' subject=subject.id date=date_Ymd as base_url %}
            <a href="{{ base_url }}?abs={{ include_abs }}&page=1">{% trans "Go to page 1" %}</a>
        </div>
      {% else %}
        <div>
          <p>{% trans "No updates for" %} {{ date_adbY }}. {% trans "There was either no announcement for this day, or no updates within the requested subject." %}</p>
        </div>
      {% endif %}
      <br>
    {% endif %}

  {% endblock %}

  {% block post_items %}
    <div>
    {% trans "Total of" %} {{ count }} {% trans "entries for" %} {{ date_adbY }}
    {% if paging|length > 0 %}
    {% trans "View page:" %}
      {% for number, link in paging %}

        {% if link == 'no-link' %}
          <span>{{ number }}</span>
        {% else %}
          <a href={{ link }}>{{ number }}</a>
        {% endif %}

      {% endfor %}
    {% endif %}

      {% if next_day %}
        <br> <br>
        {% url 'articles:catchup' subject=subject.id date=next_day as base_url %}
        <a href="{{ base_url }}?abs={{ include_abs }}&page=1">{% trans "Continue to the next day" %}</a>
      {% endif %}
    </div>
  {% endblock %}

</div>
</div>
{% endblock %}
